import os


PATH = 'Malgenome/'

api_ftr = open('commands.txt', 'r')
api_lines = api_ftr.readlines()
api_lines = [x.strip() for x in api_lines] 
api_ftr.close()


features_list=list()

for filename in os.listdir(PATH):
	#print filename
	pth = os.path.join(PATH,filename)
	result = [os.path.join(dp, f) for dp, dn, filenames in os.walk(pth) for f in filenames if os.path.splitext(f)[1] == '.smali']
	#print len(result)
	features=[0]*len(api_lines)
	for smalifile in result:
		fptr = open(smalifile,'rb')
		content = fptr.read()
	 	for i in range(0,len(api_lines)):
			if str(api_lines[i]) in content:
	 				features[i]=1
 		fptr.close()
 	
 	features.append(filename)
 	features_list.append(features)


b.close()
